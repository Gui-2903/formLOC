/**
 * Fingerprint v3.12.2 - Copyright (c) FingerprintJS, Inc, 2025 (https://fingerprint.com)
 */

"use strict";function e(e,t){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,t)?e[t]:void 0}function t(e,t,R,r){const n=document,o="securitypolicyviolation";let E;const s=t=>{const R=new URL(e,location.href),{blockedURI:r}=t;r!==R.href&&r!==R.protocol.slice(0,-1)&&r!==R.origin||(E=t,i())};n.addEventListener(o,s);const i=()=>n.removeEventListener(o,s);return null==r||r.then(i,i),Promise.resolve().then(t).then((e=>(i(),e)),(e=>new Promise((e=>{const t=new MessageChannel;t.port1.onmessage=()=>e(),t.port2.postMessage(null)})).then((()=>{if(i(),E)return R(E);throw e}))))}function R(e){let t="";for(let R=0;R<e.length;++R)if(R>0){const r=e[R].toLowerCase();r!==e[R]?t+=` ${r}`:t+=e[R]}else t+=e[R].toUpperCase();return t}Object.defineProperty(exports,"__esModule",{value:!0});const r={default:"endpoint"},n={default:"tlsEndpoint"},o="Client timeout",E="Network connection error",s="Network request aborted",i="Response cannot be parsed",_="Blocked by CSP",O="The endpoint parameter is not a valid URL",a="Handle on demand agent data error",c=R("WrongRegion"),I=R("SubscriptionNotActive"),l=R("UnsupportedVersion"),p=R("InstallationMethodRestricted"),N=R("HostnameRestricted"),T=R("IntegrationFailed"),d=R("NetworkRestricted"),u=R("InvalidProxyIntegrationSecret"),A=R("InvalidProxyIntegrationHeaders"),f=R("ProxyIntegrationSecretEnvironmentMismatch");const D="API key required",S="API key not found",h="API key expired",P="Request cannot be parsed",v="Request failed",x="Request failed to process",L="Too many requests, rate limit exceeded",m="Not available for this origin",w="Not available with restricted header",C=D,y=S,M=h;var U="3.12.2";const g="Failed to load the JS script of the agent",K="9319";function V(e,t){const R=[],[r,n]=function(e){const t=function(e){const t=[...e];return{current:()=>t[0],postpone(){const e=t.shift();void 0!==e&&t.push(e)},exclude(){t.shift()}}}(e),R=function(e,t){let R=0;return()=>Math.random()*Math.min(t,e*Math.pow(2,R++))}(100,3e3),r=new Set;return[t.current(),(e,n)=>{let o;const E=n instanceof Error?n.message:"";if(E===_||E===O)t.exclude(),o=0;else if(E===K)t.exclude();else if(E===g){const R=Date.now()-e.getTime()<50,n=t.current();n&&R&&!r.has(n)&&(r.add(n),o=0),t.postpone()}else t.postpone();const s=t.current();return void 0===s?void 0:[s,null!=o?o:e.getTime()+R()-Date.now()]}]}(e);let o;if(void 0===r)return Promise.reject(new TypeError("The list of script URL patterns is empty"));const E=e=>{const r=new Date,s=t=>R.push({url:e,startedAt:r,finishedAt:new Date,error:t}),i=t(e);return i.then((()=>s()),s),i.catch((e=>{if(null!=o||(o=e),R.length>=5)throw o;const t=n(r,e);if(!t)throw o;const[s,i]=t;return(_=i,new Promise((e=>setTimeout(e,_)))).then((()=>E(s)));var _}))};return E(r).then((e=>[e,R]))}const G="https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js",b=G;function B(t){var R,r;const{picked:n,rest:o}=function(e,t){const R={},r={};for(const[n,o]of Object.entries(e))t.includes(n)?R[n]=o:r[n]=o;return{picked:R,rest:r}}(t,["scriptUrlPattern","token","apiKey"]),E=n.token,s=null!==(R=n.apiKey)&&void 0!==R?R:E,i=null!==(r=e(t,"scriptUrlPattern"))&&void 0!==r?r:G,[_,O]=function(){const e=[],t=()=>{e.push({time:new Date,state:document.visibilityState})},R=function(e,t,R,r){return e.addEventListener(t,R,r),()=>e.removeEventListener(t,R,r)}(document,"visibilitychange",t);return t(),[e,R]}();return Promise.resolve().then((()=>{if(!s||"string"!=typeof s)throw new Error(D);const e=function(e,t){return(Array.isArray(e)?e:[e]).map((e=>function(e,t){const R=encodeURIComponent;return e.replace(/<[^<>]+>/g,(e=>"<version>"===e?"3":"<apiKey>"===e?R(t):"<loaderVersion>"===e?R(U):e))}(String(e),t)))}(i,s);return V(e,F)})).catch((e=>{throw O(),function(e){if(e instanceof Error&&e.message===K)return new Error(g);return e}(e)})).then((([e,t])=>(O(),e.load({...o,ldi:{attempts:t,visibilityStates:_}}))))}function F(e){return t(e,(()=>function(e){return new Promise(((t,R)=>{if(function(e){if(URL.prototype)try{return new URL(e,location.href),!1}catch(t){if(t instanceof Error&&"TypeError"===t.name)return!0;throw t}}(e))throw new Error(O);const r=document.createElement("script"),n=()=>{var e;return null===(e=r.parentNode)||void 0===e?void 0:e.removeChild(r)},o=document.head||document.getElementsByTagName("head")[0];r.onload=()=>{n(),t()},r.onerror=()=>{n(),R(new Error(g))},r.async=!0,r.src=e,o.appendChild(r)}))}(e)),(()=>{throw new Error(_)})).then(H)}function H(){const e=window,t="__fpjs_p_l_b",R=e[t];if(function(e,t){var R;const r=null===(R=Object.getOwnPropertyDescriptor)||void 0===R?void 0:R.call(Object,e,t);(null==r?void 0:r.configurable)?delete e[t]:r&&!r.writable||(e[t]=void 0)}(e,t),"function"!=typeof(null==R?void 0:R.load))throw new Error(K);return R}var k={load:B,defaultScriptUrlPattern:b,ERROR_SCRIPT_LOAD_FAIL:g,ERROR_API_KEY_EXPIRED:h,ERROR_API_KEY_INVALID:S,ERROR_API_KEY_MISSING:D,ERROR_BAD_REQUEST_FORMAT:P,ERROR_BAD_RESPONSE_FORMAT:i,ERROR_CLIENT_TIMEOUT:o,ERROR_CSP_BLOCK:_,ERROR_FORBIDDEN_ENDPOINT:N,ERROR_FORBIDDEN_HEADER:w,ERROR_FORBIDDEN_ORIGIN:m,ERROR_GENERAL_SERVER_FAILURE:v,ERROR_HANDLE_AGENT_DATA:a,ERROR_INSTALLATION_METHOD_RESTRICTED:p,ERROR_INTEGRATION_FAILURE:T,ERROR_INVALID_ENDPOINT:O,ERROR_INVALID_PROXY_INTEGRATION_HEADERS:A,ERROR_INVALID_PROXY_INTEGRATION_SECRET:u,ERROR_NETWORK_ABORT:s,ERROR_NETWORK_CONNECTION:E,ERROR_NETWORK_RESTRICTED:d,ERROR_PROXY_INTEGRATION_SECRET_ENVIRONMENT_MISMATCH:f,ERROR_RATE_LIMIT:L,ERROR_SERVER_TIMEOUT:x,ERROR_SUBSCRIPTION_NOT_ACTIVE:I,ERROR_TOKEN_EXPIRED:M,ERROR_TOKEN_INVALID:y,ERROR_TOKEN_MISSING:C,ERROR_UNSUPPORTED_VERSION:l,ERROR_WRONG_REGION:c,defaultEndpoint:r,defaultTlsEndpoint:n};exports.ERROR_API_KEY_EXPIRED=h,exports.ERROR_API_KEY_INVALID=S,exports.ERROR_API_KEY_MISSING=D,exports.ERROR_BAD_REQUEST_FORMAT=P,exports.ERROR_BAD_RESPONSE_FORMAT=i,exports.ERROR_CLIENT_TIMEOUT=o,exports.ERROR_CSP_BLOCK=_,exports.ERROR_FORBIDDEN_ENDPOINT=N,exports.ERROR_FORBIDDEN_HEADER=w,exports.ERROR_FORBIDDEN_ORIGIN=m,exports.ERROR_GENERAL_SERVER_FAILURE=v,exports.ERROR_HANDLE_AGENT_DATA=a,exports.ERROR_INSTALLATION_METHOD_RESTRICTED=p,exports.ERROR_INTEGRATION_FAILURE=T,exports.ERROR_INVALID_ENDPOINT=O,exports.ERROR_INVALID_PROXY_INTEGRATION_HEADERS=A,exports.ERROR_INVALID_PROXY_INTEGRATION_SECRET=u,exports.ERROR_NETWORK_ABORT=s,exports.ERROR_NETWORK_CONNECTION=E,exports.ERROR_NETWORK_RESTRICTED=d,exports.ERROR_PROXY_INTEGRATION_SECRET_ENVIRONMENT_MISMATCH=f,exports.ERROR_RATE_LIMIT=L,exports.ERROR_SCRIPT_LOAD_FAIL=g,exports.ERROR_SERVER_TIMEOUT=x,exports.ERROR_SUBSCRIPTION_NOT_ACTIVE=I,exports.ERROR_TOKEN_EXPIRED=M,exports.ERROR_TOKEN_INVALID=y,exports.ERROR_TOKEN_MISSING=C,exports.ERROR_UNSUPPORTED_VERSION=l,exports.ERROR_WRONG_REGION=c,exports.default=k,exports.defaultEndpoint=r,exports.defaultScriptUrlPattern=b,exports.defaultTlsEndpoint=n,exports.load=B;
